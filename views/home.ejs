
<h1 class="page-heading">
     <%= title%>
</h1>
<section id="feed-posts">
     <h4>Posts</h4>
     <!-- check if the user is logged in t show the posting form elseshow posts only -->
     <!-- also authenticate the user in posts .js using passport  -->
     <% if (locals.user) {%>
           
     <form action="/posts/create" id="new-post-form" method="POST">
          <textarea name="content"  cols="30" rows="3" placeholder="Type your post here...." required></textarea>
          <button type="submit">Post</button>
     </form>
     <% } %>
     <div id="posts-list-container">
          <ul>
               <% for (post of posts) { %> 
                    <p>
                         <li>
                              <%= post.content %>
                              <br>
                              <small>
                                   <%= post.user.name %>
                              </small>
                              <div class="post-comments">
                                   <%if (locals.user) { %>
                                   <form action="/comments/create" id="comment-form" method="POST">
                                        <input type = "text" name="content"  placeholder="Your comment here..." required>
                                        <input type="hidden" name="post" value="<%= post._id%>">
                                        <button type="submit">Comment</button>
                                   </form>
                                   <% } %>
                                   <div class="post-comments-list">
                                        <ul id="post-comments-<%= post.id %>">
                                             <li>
                                                  <% for (comment of post.comments) {%>
                                                       <p>
                                                            <%= comment.content%>
                                                            <small>
                                                                 <%= comment.user.name%>
                                                            </small>
                                                       </p>
                                                  <% } %> 
                                             </li>
                                        </ul>
                                   </div>
                              </div>
                              
                         </li>  
                    </p>
               <% } %>
          </ul>
     </div>

</section>